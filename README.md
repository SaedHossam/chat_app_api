# Chat System Readme

## Overview
This is a Ruby on Rails application that provides a RESTful API for managing applications, chats, and messages within those chats. The system allows for the creation of new applications, each with a unique token generated by the system and a name provided by the client. Each application can have multiple chats, and each chat can contain multiple messages.

## Features
- **Application Management**: Create, update, and read applications. Applications are identified by their unique token.
- **Chat Management**: Create, update, and read chats within a specific application. Each chat has a unique number within its application.
- **Message Management**: Create, update, and read messages within a specific chat. Each message has a unique number within its chat.
- **Search Messages**: An endpoint is provided to search through messages of a specific chat, allowing partial matching of message bodies. Elasticsearch is used for efficient searching.
- **Optimized Database**: The applications table contains a `chats_count` column, and the chats table contains a `messages_count` column to efficiently retrieve the number of chats for an application and the number of messages in a chat.
- **Concurrency Handling**: The system is designed to handle concurrent requests and race conditions, ensuring data integrity.
- **Containerized Deployment**: The application is containerized using Docker. Simply run `docker-compose up` to deploy the entire stack.

## Technologies Used
- **Ruby on Rails**: Used for building the API and workers.
- **Elasticsearch**: Utilized for efficient message searching.
- **MySQL**: Main datastore for storing application, chat, and message data.
- **Redis**: Can be used as a queuing system for optimizing database operations.
- **Docker**: Containerization of the application for easy deployment.

## Setup Instructions
1. Clone this repository to your local machine.
2. Make sure you have Docker installed.
3. Navigate to the root directory of the project.
4. Run `docker-compose up` to start the application stack.
5. Once the containers are up and running, you can access the API endpoints.

## API Endpoints
- **Create Application**: POST /applications
- **Update Application**: PUT /applications/:application_token
- **Read Application**: GET /applications/:application_token
- **Create Chat**: POST /applications/:application_token/chats
- **Update Chat**: PUT /applications/:application_token/chats/:chat_number
- **Read Chat**: GET /applications/:application_token/chats/:chat_number
- **Create Message**: POST /applications/:application_token/chats/:chat_number/messages
- **Update Message**: PUT /applications/:application_token/chats/:chat_number/messages/:message_number
- **Read Message**: GET /applications/:application_token/chats/:chat_number/messages/:message_number
- **Search Messages**: POST /applications/:application_token/chats/:chat_number/messages/search

## Postman Collection
A Postman collection named "Chat App API.postman_collection.json" is included in this repository for easy testing and usage of the API endpoints.

Feel free to reach out if you have any questions or need further assistance!
